<% layout("layouts/boilerplate") %>
<div class="position-relative">
<% if (!category) { %>
  <div id="filters" class="d-flex overflow-auto gap-3 py-2 px-3 category-scroll">
    <a href="/listings?category=Trending" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-fire fa-1x"></i></div>
      <p class="mb-0">Trending</p>
    </a>
    <a href="/listings?category=Mountains" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-mountain fa-1x"></i></div>
      <p class="mb-0">Mountain</p>
    </a>
    <a href="/listings?category=Rooms" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-bed fa-1x"></i></div>
      <p class="mb-0">Rooms</p>
    </a>
    <a href="/listings?category=Iconic Cities" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-mountain-city fa-1x"></i></div>
      <p class="mb-0">Iconic Cities</p>
    </a>
    <a href="/listings?category=Farms" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-tractor fa-1x"></i></div>
      <p class="mb-0">Farms</p>
    </a>
    <a href="/listings?category=Castles" class="filter text-center flex-shrink-0">
      <div><i class="fa-regular fa-chess-rook fa-1x"></i></div>
      <p class="mb-0">Castles</p>
    </a>
    <a href="/listings?category=Camping" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-campground fa-1x"></i></div>
      <p class="mb-0">Camping</p>
    </a>
    <a href="/listings?category=Arctic" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-snowflake fa-1x"></i></div>
      <p class="mb-0">Arctic</p>
    </a>
    <a href="/listings?category=Amazing Pools" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-person-swimming fa-1x"></i></div>
      <p class="mb-0">Amazing Pools</p>
    </a>
   


        <!--toggle-->
         <!-- Fixed toggle (not part of scrolling) -->
         <div id="toggle-switch" class="position-absolute top-50 end-0 translate-middle-y pe-3 ">
          <div class="form-check-reverse form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
            <label class="form-check-label mb-0" for="switchCheckDefault">Final Amount</label>
          </div>
        </div>
</div>
<% } %>
</div>


<% if (category) { %>
  <a href="/listings" class="btn edit-btn mb-3 mt-3">‚Üê Show All Listings</a>
  <h4 class="mb-3">Showing results for: <%= category %></h4>
<% } %>




   <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3" >
   
    <%  for(let listing of allListings){ %>
        <a href="/listings/<%= listing._id %>" class="listing-link">
        <div class="card col listing-card" >
            <img src="<%= listing.image.url %>" class="card-img-top"  style="height: 20rem;" alt="listing-image">
            <div class="card-img-overlay"></div>
            <div class="card-body">
              <p class="card-text">
                <b><%= listing.title %></b><br>
                &#8377; <%= listing?.price ? listing.price.toLocaleString("en-IN") : "N/A" %> /night
                <i class="tax-info">&nbsp; &nbsp; +18% GST</i>
            </p>
            </div>
          </div>
          </a>
          <% } %>
    
   </div>

   <script>

       let toggleToken = document.getElementById("toggle-switch");

       toggleToken.addEventListener("click",()=>{
          let taxInfo = document.getElementsByClassName("tax-info");
          for(info of taxInfo){
           if(info.style.display != "inline"){
            info.style.display = "inline";
           }else{
            info.style.display = "none";
           }
          }
       })
       
   </script>

   


