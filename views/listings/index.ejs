<% layout("layouts/boilerplate") %>
<div class="position-relative">
<% if (!category) { %>
  <div id="filters" class="d-flex overflow-auto gap-3 py-2 px-3 category-scroll">
    <a href="/listings?category=Trending" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-fire fa-1x"></i></div>
      <p class="mb-0">Trending</p>
    </a>
    <a href="/listings?category=Mountains" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-mountain fa-1x"></i></div>
      <p class="mb-0">Mountain</p>
    </a>
    <a href="/listings?category=Rooms" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-bed fa-1x"></i></div>
      <p class="mb-0">Rooms</p>
    </a>
    <a href="/listings?category=Iconic Cities" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-mountain-city fa-1x"></i></div>
      <p class="mb-0">Iconic Cities</p>
    </a>
    <a href="/listings?category=Farms" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-tractor fa-1x"></i></div>
      <p class="mb-0">Farms</p>
    </a>
    <a href="/listings?category=Castles" class="filter text-center flex-shrink-0">
      <div><i class="fa-regular fa-chess-rook fa-1x"></i></div>
      <p class="mb-0">Castles</p>
    </a>
    <a href="/listings?category=Camping" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-campground fa-1x"></i></div>
      <p class="mb-0">Camping</p>
    </a>
    <a href="/listings?category=Arctic" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-snowflake fa-1x"></i></div>
      <p class="mb-0">Arctic</p>
    </a>
    <a href="/listings?category=Amazing Pools" class="filter text-center flex-shrink-0">
      <div><i class="fa-solid fa-person-swimming fa-1x"></i></div>
      <p class="mb-0">Amazing Pools</p>
    </a>
   


        <!--toggle-->
         <!-- Fixed toggle (not part of scrolling) -->
         <div id="toggle-switch" class="position-absolute top-50 end-0 translate-middle-y pe-3 ">
          <div class="form-check-reverse form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
            <label class="form-check-label mb-0" for="switchCheckDefault">Final Amount</label>
          </div>
        </div>
</div>
<% } %>
</div>


<% if (category) { %>
  <a href="/listings" class="btn edit-btn mb-3 mt-3">‚Üê Show All Listings</a>
  <h4 class="mb-3">Showing results for: <%= category %></h4>
<% } %>




   <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3" >
   
    <%  for(let listing of allListings){ %>
        <a href="/listings/<%= listing._id %>" class="listing-link">
        <div class="card col listing-card" >
            <img src="<%= listing.image.url %>" class="card-img-top"  style="height: 20rem;" alt="listing-image">
            <div class="card-img-overlay"></div>
            <div class="card-body">
              <p class="card-text">
                <b><%= listing.title %></b><br>
                &#8377; <%= listing?.price ? listing.price.toLocaleString("en-IN") : "N/A" %> /night<br>
                <i class="tax-info"> After tax charges : +18% GST</i>
            </p>
            </div>
          </div>
          </a>
          <% } %>
    
   </div>
   <hr>
   <section class="container my-5">
    <h2 class="text-center mb-4" >Explore Top Destinations</h2>
    <br>
    <div class="row g-4">
  
      <!-- Card 1 -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="explore-card text-center p-3 shadow-sm rounded">
          <img src="https://images.unsplash.com/photo-1542224566-6e85f2e6772f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTR8fG1vdW50YWluc3xlbnwwfHwwfHx8MA%3D%3D" class="explore-img mb-3" alt="Mountains">
          <h5 class="explore-title">Mountains</h5>
          <p class="explore-text">Breathe in the serene heights of the Himalayas.</p>
        </div>
      </div>
  
      <!-- Card 2 -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="explore-card text-center p-3 shadow-sm rounded">
          <img src="https://images.unsplash.com/photo-1564078516393-cf04bd966897?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8cm9vbXN8ZW58MHx8MHx8fDA%3D" class="explore-img mb-3" alt="Rooms">
          <h5 class="explore-title">Rooms</h5>
          <p class="explore-text">Find comfort in world-class stays everywhere.</p>
        </div>
      </div>
  
      <!-- Card 3 -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="explore-card text-center p-3 shadow-sm rounded">
          <img src="https://images.unsplash.com/photo-1593224599365-407b2fd72ca7?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fGJlYWNoZXN8ZW58MHx8MHx8fDA%3D" class="explore-img mb-3" alt="Beaches">
          <h5 class="explore-title">Beaches</h5>
          <p class="explore-text">Soak up the sun on exotic tropical coasts.</p>
        </div>
      </div>
  
      <!-- Card 4 -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="explore-card text-center p-3 shadow-sm rounded">
          <img src="https://images.unsplash.com/photo-1536846118400-dc03751fd172?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8YXJjdGljfGVufDB8fDB8fHww" class="explore-img mb-3" alt="Arctic">
          <h5 class="explore-title">Arctic</h5>
          <p class="explore-text">Chill with glaciers and witness the Northern Lights.</p>
        </div>
      </div>
  
      <!-- Card 5 -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="explore-card text-center p-3 shadow-sm rounded">
          <img src="https://images.unsplash.com/photo-1511739001486-6bfe10ce785f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cGFyaXN8ZW58MHx8MHx8fDA%3D" class="explore-img mb-3" alt="Paris">
          <h5 class="explore-title">Paris</h5>
          <p class="explore-text">Discover art, fashion, and romance in the City of Light.</p>
          
        </div>
      </div>
  
      <!-- Card 6 -->
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="explore-card text-center p-3 shadow-sm rounded">
          <img src="https://media.istockphoto.com/id/497891792/photo/seljalandsfoss-waterfall-against-the-sun-south-iceland.webp?a=1&b=1&s=612x612&w=0&k=20&c=zBGA6TSrAqTfjth5vZ4wAq5Z6U6bJhnWTsaeIeYKH7A=" class="explore-img mb-3" alt="Waterfalls">
          <h5 class="explore-title">Waterfalls</h5>
          <p class="explore-text">Feel the thrill of cascading natural wonders.</p>
        </div>
      </div>
  
    </div>
  </section>
  
   <hr>

   <section class="container my-5">
    <h2 class="mb-4 text-center faq-title">Frequently Asked Questions</h2>
  
    <div class="accordion" id="wanderlustFaq">
  
     <!-- Q1 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq1">
      <button class="accordion-button faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va1" aria-expanded="true" aria-controls="va1">
        What is Vista?
      </button>
    </h2>
    <div id="va1" class="accordion-collapse collapse show" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Vista is a full-stack travel platform where users can explore dream destinations, upload travel places, leave reviews, and connect with hosts worldwide.
      </div>
    </div>
  </div>

  <!-- Q2 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq2">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va2" aria-expanded="false" aria-controls="va2">
        How does Vista work?
      </button>
    </h2>
    <div id="va2" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Users can browse destinations, view listings on an interactive map, leave reviews, and hosts can upload and manage their own travel places with photos and details.
      </div>
    </div>
  </div>

  <!-- Q3 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq3">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va3" aria-expanded="false" aria-controls="va3">
        Who can upload places on Vista?
      </button>
    </h2>
    <div id="va3" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Only verified hosts can upload places. Hosts are users who create accounts and get permission to list and manage travel destinations.
      </div>
    </div>
  </div>

  <!-- Q4 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq4">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va4" aria-expanded="false" aria-controls="va4">
        How do I become a host?
      </button>
    </h2>
    <div id="va4" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Simply sign up on Vista and apply to become a host. Once approved, you can start uploading your own listings with images, pricing, and descriptions.
      </div>
    </div>
  </div>

  <!-- Q5 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq5">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va5" aria-expanded="false" aria-controls="va5">
        What can hosts do on Vista?
      </button>
    </h2>
    <div id="va5" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Hosts can add new travel places, edit existing listings, and delete them if needed. They manage their listings via a dedicated host dashboard.
      </div>
    </div>
  </div>

  <!-- Q6 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq6">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va6" aria-expanded="false" aria-controls="va6">
        Can regular users edit or delete listings?
      </button>
    </h2>
    <div id="va6" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        No. Only hosts have the ability to edit or delete listings. Regular users can browse, review, and book trips but cannot modify listings.
      </div>
    </div>
  </div>

  <!-- Q7 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq7">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va7" aria-expanded="false" aria-controls="va7">
        How do I sign up or log in?
      </button>
    </h2>
    <div id="va7" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        New users can sign up with their email to create an account. If you already have an account, just log in to access all features.
      </div>
    </div>
  </div>

  <!-- Q8 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq8">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va8" aria-expanded="false" aria-controls="va8">
        Can I review a destination on Vista?
      </button>
    </h2>
    <div id="va8" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Yes! Logged-in users can leave reviews and ratings on any travel listing to share their experiences with the community.
      </div>
    </div>
  </div>

  <!-- Q9 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq9">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va9" aria-expanded="false" aria-controls="va9">
        Are the dream destinations curated?
      </button>
    </h2>
    <div id="va9" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Vista features both curated dream destinations and user-uploaded listings to offer a rich and diverse travel experience.
      </div>
    </div>
  </div>

  <!-- Q10 -->
  <div class="accordion-item border-0">
    <h2 class="accordion-header" id="vq10">
      <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#va10" aria-expanded="false" aria-controls="va10">
        Is Vista free to use?
      </button>
    </h2>
    <div id="va10" class="accordion-collapse collapse" data-bs-parent="#vistaFaq">
      <div class="accordion-body">
        Yes, browsing and reviewing destinations is free. Hosts may pay fees or commissions based on their listings, depending on platform policies.
      </div>
    </div>
  </div>

    </div>
  </section>
 
  

   <script>

    const toggleSwitch = document.getElementById("toggle-switch");

    toggleSwitch.addEventListener("click" ,()=>{
      const taxInfos = document.querySelectorAll(".tax-info");

   taxInfos.forEach((taxInfo) => {
   if (taxInfo.style.display !== "inline") {
    taxInfo.style.display = "inline";
    taxInfo.style.color = "red";
   } else {
    taxInfo.style.display = "none";
   }
});
   
      
    })

   </script>
